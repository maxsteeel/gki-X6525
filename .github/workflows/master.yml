name: Build GKI Kernel (master branch)
on:
  workflow_dispatch:
jobs:
  build:
    name: Build Kernel
    runs-on: buildjet-64vcpu-ubuntu-latest
    steps:
      - name: Clone Kernel Source with Submodules
        run: |
          git clone --recurse-submodules https://github.com/maxsteeel/android_kernel_unisoc common -j$(nproc --all)
      - name: Build Kernel
        run: |
          cd common
          make O="out" unisoc_defconfig
          make O="out" Image
      - name: Upload Kernel (Image)
        uses: actions/upload-artifact@v4
        with:
          name: GKI-Build-Artifacts-5.4-Max-X6525-Next
          path: common/out/arch/arm64/boot/Image
